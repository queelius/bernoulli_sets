# Editorial Review: Bernoulli Sets (2026-02-24)

**Paper**: "Bernoulli sets: a model for sets with random errors and corresponding random binary classification measures"
**Author**: Alexander Towell
**Length**: 40 pages (11 sections + appendix)
**Build**: pdflatex, clean compile (0 undefined references, 0 missing citations)

---

## Summary Verdict

This paper introduces the Bernoulli set model -- a compositionally closed probabilistic framework for random approximate sets parameterized by false positive and false negative rates. The core contribution (closure under set-theoretic operations) is genuine and well-executed: the error-rate formulas for complement, union, intersection, and difference are correct, clearly derived, and practically useful. The paper is strongest in Sections 3-5, where the axioms, distributions, and set-theoretic closure results form a coherent and self-contained theory. However, one mathematical error in the relational section (Section 6) must be corrected, a confidence interval formula contains an error in its quantile notation, and several sections (algebraic structure, interval arithmetic, encrypted search) are underdeveloped relative to the paper's 40-page length. The bibliography is thin for a paper of this scope, and the paper has only one figure. After correcting the mathematical error and addressing the major issues below, the paper would be suitable for a journal-length submission with minor revisions.

**Recommendation: Major revision** (one mathematical error + structural issues that collectively require substantive work).

---

## Strengths

1. **Clear axiomatic foundation.** The two-axiom framework (element-wise independence, conditional independence of block error rates) is economical and well-motivated. The axioms are stated precisely and their consequences are systematically developed. (Sections 3, 4, 5)

2. **Complete set-theoretic closure results.** The derivation of error rates for all four operations (complement, union, intersection, difference) is thorough, with proofs that partition the universe correctly and apply total probability cleanly. The De Morgan duality between union FPR and intersection FNR is explicitly identified. (Section 5)

3. **Useful summary table.** Table 2 (set-operation error rates) is an excellent reference artifact -- a reader can apply the framework without re-deriving the formulas. The numerical example (Example 5.1) adds welcome concreteness. (Section 5.5-5.6)

4. **Composition theorem.** Theorem 3.3 (k-fold composition) is the key result for higher-order approximate sets and is proved cleanly via the law of total probability. This is the result that distinguishes the paper from ad hoc analyses. (Section 3.2)

5. **ADT formulation.** Framing the model as an abstract data type (Section 3.1) is a genuine contribution: it decouples the theory from any specific implementation and makes the model portable. The Boolean search application (Section 10) is a natural demonstration of this portability.

6. **Notation reference appendix.** The comprehensive notation reference (Appendix C) is a reader-friendly addition for a notation-heavy paper.

---

## Issues

### Critical (blocks submission)

**C1. Equality probability formula is incorrect (Section 6, Corollary after Theorem 6.1)**

The corollary claims that $P(\tilde{X} = \tilde{Y} \mid X = Y)$ equals the product of the subset probabilities:
$$P(\tilde{X} \subseteq \tilde{Y}) \cdot P(\tilde{Y} \subseteq \tilde{X})$$

The proof asserts these events are independent because "they depend on distinct error events." This is false. Both events $\tilde{X} \subseteq \tilde{Y}$ and $\tilde{Y} \subseteq \tilde{X}$ depend on the same random variables $\{\mathbf{1}_{\tilde{X}}(j), \mathbf{1}_{\tilde{Y}}(j) : j \in U\}$ and are therefore not independent.

**Concrete counterexample**: For a single element $j \in X$ (so $j \in Y$), $P(\tilde{X}(j) = 1) = \tau_1$ and $P(\tilde{Y}(j) = 1) = \tau_2$.
- Correct per-element equality probability: $1 - \tau_1\omega_2 - \tau_2\omega_1$
- Formula as stated (product of subset factors): $(1 - \tau_1\omega_2)(1 - \tau_2\omega_1) = 1 - \tau_1\omega_2 - \tau_2\omega_1 + \tau_1\omega_2\tau_2\omega_1$

The extra cross-term $\tau_1\omega_2\tau_2\omega_1$ makes the formula overcount. The correct equality probability per element is $P(\tilde{X}(j) = \tilde{Y}(j)) = P(\text{both 1}) + P(\text{both 0})$, and the overall equality probability is the product over all elements.

**Fix**: Derive the equality probability directly from element-wise factorization rather than via subset independence. For each element $j$, compute $P(\tilde{X}(j) = \tilde{Y}(j))$ based on the three blocks ($X$, $Y \setminus X$, $U \setminus Y$ -- but since $X = Y$, there are only two blocks: $X$ and $U \setminus X$). Then take the product. The subsequent corollaries that depend on this result must also be corrected.

---

### Major (should fix before submission)

**M1. Confidence interval quantile formula is incorrect (Section 4.1, Theorem 4.6)**

The confidence interval is stated as:
$$\varepsilon \pm \sqrt{\frac{\varepsilon(1-\varepsilon)}{n}} \Phi^{-1}(\gamma/2)$$

For a standard two-sided $\gamma \cdot 100\%$ CI, the correct quantile is $\Phi^{-1}(1 - (1-\gamma)/2) = \Phi^{-1}((1+\gamma)/2)$, not $\Phi^{-1}(\gamma/2)$. For example, for a 95% CI ($\gamma = 0.95$), $\Phi^{-1}(0.95/2) = \Phi^{-1}(0.475) \approx -0.063$, which produces a near-zero-width interval. The intended quantile is $\Phi^{-1}(0.975) \approx 1.96$.

**Fix**: Replace $\Phi^{-1}(\gamma/2)$ with $\Phi^{-1}((1+\gamma)/2)$, or alternatively define $\gamma$ as the significance level (not the confidence level) and use $\Phi^{-1}(1 - \gamma/2)$, being explicit about the convention.

**M2. Theorem 4.4 statement contains $\FP_p$ instead of $\FN_p$ (Section 4, line 110)**

The theorem statement says "denoted by $\FP_p$" but the equation immediately below uses $\FN_p$. Since the theorem is about false negatives, this should be $\FN_p$.

Location: `sections/distributions.tex`, line 110.

**M3. Theorem 4.5 support has wrong variable (Section 4, line 129)**

The support of $\beta_p$ is stated as $\{j/n : j = 0, \ldots, p\}$. Since $\beta_p = \FN_p / p$, the correct support is $\{j/p : j = 0, \ldots, p\}$.

Location: `sections/distributions.tex`, line 129.

**M4. Block error rate terminology is contradictory (Section 3, line 32)**

The text reads: "block error rates $\alpha_1 = \beta$ (true positive rate on positives) and $\alpha_2 = \alpha$ (false positive rate on negatives)."

The term "block ERROR rates" is inconsistent with calling $\beta$ the "true positive rate," which is not an error rate. If $\alpha_i$ denotes the block error rate, then for the positive block the error is the false negative rate $\omega = 1 - \tau$, not $\tau$. The sentence should either (a) define $\alpha_i$ as block response rates (not error rates), or (b) use $\alpha_1 = \omega$ with the clarification "false negative rate on positives."

**M5. Bibliography is thin for a 40-page paper (10 entries)**

The paper cites only 10 works. For a 40-page theory paper touching on probabilistic data structures, binary classification, information theory, interval arithmetic, encrypted search, and abstract data types, this is inadequate. Conspicuously missing references include:

- **Approximate membership query (AMQ) structures beyond Bloom/cuckoo**: Quotient filters (Bender et al. 2012), XOR filters (Graf & Lemire 2020), ribbon filters (Dillinger & Walzer 2021).
- **Algebraic/compositional frameworks for probabilistic structures**: Carter et al. (1978) on universal hash families, Kirsch & Mitzenmacher (2006) on less hashing.
- **Binary classification theory**: The extensive statistics literature on confusion matrices, ROC analysis (Fawcett 2006), and the relationship between PPV and prevalence.
- **Encrypted search**: Song, Wagner & Perrig (2000) on practical techniques for searches on encrypted data; Curtmola et al. (2006) on searchable symmetric encryption; Cash et al. (2013) on dynamic searchable encryption. The current encrypted search section cites zero papers on encrypted search.
- **Interval arithmetic**: Moore (1966), Neumaier (1990) -- foundational references beyond the single Hickey et al. citation.
- **Probabilistic set membership as channel coding**: The connection to binary symmetric channels is implicit but never cited. Cover & Thomas is cited for entropy only.

**M6. Algebraic structure section is underdeveloped (Section 9, 57 lines)**

This section promises to examine algebraic structure but delivers only: (a) semigroup/monoid definitions, (b) the observation that approximate sets form a semigroup under union/intersection, (c) an obstruction to monoid structure, and (d) a "fix" via degenerate cases. This is too thin for a full section in a 40-page paper.

Missing content that would justify the section:
- Does the collection form a lattice? A Boolean algebra? (Probably not -- discuss why.)
- What is the relationship between the monoid structure and the error-rate algebra? (The error rates themselves form a monoid under the composition rule of Theorem 3.3.)
- Can the commutative monoid structure be leveraged for efficient computation (beyond the brief reduce remark)?

If the section cannot be expanded, consider folding it into Section 5 as a subsection on closure properties (which already exists there).

**M7. Only 1 figure in a 40-page paper**

The paper contains a single histogram (Figure 2, PPV relative frequencies) and one schematic (Figure 1, approximate set Venn diagram). For a 40-page theory paper, this is insufficient. Suggested additions:
- A figure showing how union/intersection FPR/FNR vary as a function of input rates (visualizing Table 2).
- A figure showing the k-fold composition convergence (error rates as a function of $k$).
- A figure for the interval propagation section (input interval to output interval).
- A diagram for the Boolean search pipeline (query tree -> approximate result sets).

---

### Minor (nice to fix)

**m1. Sentence fragment in Section 3.2, line 112**

"Composing random approximate sets over the Boolean algebra $(\Sigma, \cup, \cap, {}^c, \emptyset, U)$, where $\Sigma \subseteq \mathcal{P}(U)$ since, for instance, if a deterministic algorithm implements the model some elements in $\mathcal{P}(U)$ may not be reachable."

This is a sentence fragment. There is no main verb. Rewrite as: "We compose random approximate sets over the Boolean algebra $(\Sigma, \cup, \cap, {}^c, \emptyset, U)$. Here $\Sigma \subseteq \mathcal{P}(U)$ because a deterministic implementation may not reach every element of $\mathcal{P}(U)$."

**m2. Function type notation uses $\mapsto$ instead of $\to$ throughout**

The paper consistently writes function types as $f : X \mapsto Y$ (using `\mapsto`). The standard convention is $f : X \to Y$ (using `\to`), reserving $\mapsto$ for element mappings like $x \mapsto f(x)$. This appears throughout Sections 2, 3, 4, 6, and 10.

**m3. $X^0 = \{\emptyset\}$ is questionable (Section 2, line 40)**

The text states $X^0 = \{\emptyset\}$. In the context of Cartesian products, $X^0$ is conventionally the singleton set containing the empty tuple $\{()\}$, which is a one-element set but is not $\{\emptyset\}$. The empty tuple and the empty set are distinct objects. Write $X^0 = \{()\}$ or simply say "$X^0$ is a singleton set."

**m4. Typo: "he number" (Section 4, line 380)**

`sections/distributions.tex`, line 380: "respectively he number" should be "respectively the number."

**m5. Typo: $\FP_p$ instead of $\FP_n$ in appendix proof (Appendix B, line 99)**

`sections/appendix.tex`, line 99: "$\Expect{\FP_p - \overline{f}} = 0$" should be "$\Expect{\FP_n - \overline{f}} = 0$" since the random variable is $\FP_n$ (false positives conditioned on $n$ negatives).

**m6. Comma after `\end{equation*}` (Appendix B, line 41)**

`sections/appendix.tex`, line 41: `\end{equation*},` has a trailing comma that produces a visible comma in the output. Remove it.

**m7. Run-on sentence (Section 4, line 165)**

"where $u$ is the cardinality of the universal set has an expectation of..." -- missing punctuation. Should be: "where $u$ is the cardinality of the universal set. This sum has an expectation of..."

**m8. Inconsistent theorem labeling: "corollary" text says "theorem" (Section 4, line 216)**

Line 216 reads "Confidence intervals... are given by the following corollaries" but the next environment is `\begin{theorem}`. Either change the text to "theorem" or use a corollary environment.

**m9. NPV definition lacks surrounding text (Section 4, lines 376-382)**

The definition of negative predictive value opens with a bare equation inside `\begin{definition}` without any leading sentence. Additionally, the "where" clause (line 380-381) lacks a period. Compare with the PPV definition which has "The positive predictive value is a performance measure defined as..."

**m10. 132 duplicate PDF destination warnings**

The build produces 132 "destination with the same identifier" warnings from hyperref. This is caused by equations inside theorem environments sharing counter values with `\numberwithin{equation}{section}`. While the PDF still renders, these warnings indicate broken hyperlinks in the equation references. Fix by loading the `hypdestopt` package or by adjusting the hyperref configuration.

**m11. Two self-citations are "manuscript in preparation" (references.bib)**

`phf` (Perfect Hash Filter) and `shs` (Singular Hash Set) are both cited as `@Unpublished` with note "Manuscript in preparation" dated 2018 -- eight years ago. If these manuscripts are still unpublished, consider either (a) providing preprint URLs, (b) citing the underlying ideas without claiming a forthcoming paper, or (c) removing the citations and describing the relevant ideas inline.

**m12. The encrypted search section does not cite any encrypted search literature**

Section 10.3-10.4 discusses encrypted Boolean search but cites zero papers on encrypted search, searchable encryption, or secure computation. The remark acknowledging that the substitution cipher "does not provide a meaningful confidentiality gain" is good, but the section needs context: what are the real approaches to encrypted search, and how does the Bernoulli set model interface with them?

**m13. Heading "Proof of corollary~\ref{cor:fpr_as_vareps}" in appendix uses section-level heading**

`sections/appendix.tex`, line 8: The appendix proofs use `\section{}` for individual proofs. This creates top-level sections in the appendix (Appendix A, B, C), which is appropriate but means each proof gets its own appendix letter. Consider whether this is the intended structure or whether `\subsection{}` within a single appendix section would be more conventional.

---

### Suggestions (optional improvements)

**S1. Add a "Bernoulli set at a glance" figure early in the paper.**
A single figure showing: objective set $A$, approximate set $\tilde{A}$, with FP/FN/TP/TN regions colored, along with the rate formulas, would serve as a visual anchor for the rest of the paper. (Figure 1 exists but is small and unlabeled with rates.)

**S2. State the composition theorem as a matrix equation.**
The composition of error rates $(\varepsilon, \tau) \circ (\varepsilon', \tau')$ has the structure of a $2 \times 2$ stochastic matrix multiplication. Making this explicit would clarify the connection to Markov chains/binary symmetric channels and make the k-fold composition formula $M^k$ immediately obvious.

**S3. Connect the model to the binary symmetric channel (BSC).**
The second-order Bernoulli set model is essentially an element-wise BSC. This connection is implicit but never made explicit. Stating it would immediately connect the paper to a large information-theory literature and make the entropy results feel less isolated.

**S4. Add a complexity analysis of computing error rates for compound queries.**
The Boolean search section shows that result sets are Bernoulli sets, but does not analyze how hard it is to compute the resulting error rates for a given query tree. The partition weights $w_1, w_2, w_3$ depend on the cardinalities of objective sets, which may not be known. Discuss this limitation explicitly.

**S5. Consider adding a "limitations" paragraph to the conclusion.**
The conclusion mentions the independence assumption but could also discuss: (a) the requirement for known cardinalities in the set-operation formulas, (b) the restriction to finite universes for most results, (c) the gap between the model's assumptions and real-world implementations where errors may be correlated.

**S6. The interval arithmetic section (Section 7) could be more tightly integrated.**
Currently it reads as a standalone aside. Consider either expanding it into a full treatment (with interval versions of all Table 2 formulas) or reducing it to a remark within Section 5.

**S7. The appendix notation reference could include the composition notation.**
The notation $\sigma^k$ for k-fold composition and $\tilde{A}^{\sigma^k}$ is introduced in Section 3.2 but not listed in the notation reference.

---

## Section-by-Section Notes

### Section 1: Introduction (47 lines)
- The "gap" and "contribution" paragraphs are well-structured and clearly motivate the work.
- The related work paragraph is too compressed for a 40-page paper; it should be expanded into its own subsection or section with proper coverage of AMQ structures, encrypted search, and classification theory.
- The five-item contribution list is effective and matches the paper's actual content.

### Section 2: Algebra of Sets (148 lines)
- Reads as a textbook review of elementary set theory. For a journal paper, this could be trimmed to 1/3 of its length by assuming the reader knows what sets, functions, and indicator functions are.
- The definition of "function" as "a binary relation on $X \times Y$" is fine but using $\mapsto$ for the type annotation is nonstandard.
- $X^0 = \{\emptyset\}$ is a minor mathematical error (see m3).
- The approximate sets subsection (2.1) is well-motivated and clearly connects to binary classification.

### Section 3: Bernoulli Set Model (269 lines)
- The axioms are well-stated and the model order definition is clear.
- The block error rate terminology is confusing (see M4).
- The ADT subsection (3.1) is a good idea but could be clearer about what "models" means formally.
- The higher-order composition (3.2) is the paper's most novel contribution. The proof of Theorem 3.3 is correct and clean.
- The sentence fragment on line 112 (see m1) disrupts an otherwise well-written section.
- The probability space subsection (3.3) is somewhat redundant -- it re-establishes the probability model after the axioms already did so.
- The Boolean universe example (Example 3.1) is a nice pedagogical device.

### Section 4: Distributions (455 lines)
- The longest section and the core technical workhorse. The derivations are correct.
- Theorem 4.1 (FP ~ Binomial) and its consequences are standard but clearly presented.
- The Taylor-expansion approximation for PPV (Theorem 4.7) is a useful result; the full proof in the appendix is complete.
- **Errors**: Theorem 4.4 has $\FP_p$ instead of $\FN_p$ (M2). Theorem 4.5 has $j/n$ instead of $j/p$ (M3). The confidence interval formula has the wrong quantile (M1).
- The asymptotic normality results (Theorem 4.6) are correctly invoked via CLT.
- The Youden's J section is brief but appropriate.
- The performance measures table (Table 1) is a useful reference.

### Section 5: Set-Theoretic Operations (578 lines)
- The strongest section of the paper. All four operation proofs are correct and well-structured.
- The partition-based approach to union FNR and intersection FPR is clean.
- The De Morgan duality observation is well-placed.
- The closure properties and grammar characterization (equations 5.13-5.14) are elegant.
- The numerical example (Example 5.1) is welcome.
- The asymptotic behavior subsection connects nicely to Section 4.

### Section 6: Relational Probabilities (129 lines)
- The subset probability theorem is correct and well-proved.
- **The equality corollary is mathematically incorrect** (C1). The independence claim in the proof is wrong, and the resulting formula has a spurious cross-term.
- The subsequent corollaries (equal rates, positive subset, infinite universe) may or may not survive the correction of C1; they should be re-derived.

### Section 7: Uncertain Rates (95 lines)
- The idea of propagating intervals through the error-rate formulas is sound.
- The section is too short to be a standalone section -- it introduces interval arithmetic, gives one theorem (complement), one theorem (union), and one example (PPV), then stops.
- The intersection and set difference cases are relegated to a remark. Either derive them or fold this into Section 5.
- The dependency problem is mentioned but not analyzed.

### Section 8: Entropy (143 lines)
- The joint entropy theorem is correctly derived using the binomial entropy asymptotic expansion.
- The conditional entropy decomposition when positives are uncertain is standard but clearly presented.
- The space complexity subsection fits here thematically but the proof sketch for Proposition 8.1 is too sketchy -- the "counting argument" is not actually given.
- The Bloom filter efficiency comparison ($\ln 2 \approx 0.69$) is a well-known result and properly contextualized.

### Section 9: Algebraic Structure (57 lines)
- Too thin for a full section (see M6).
- The semigroup/monoid analysis is correct but shallow.
- The "monoid fix" via degenerate cases is the same idea already stated in Section 3.2 (Remark after line 114). This duplication should be consolidated.
- The generic programming remark is a nice connection but needs more development.

### Section 10: Boolean Search (177 lines)
- The formalization of Boolean search as a homomorphism is clean.
- Theorem 10.1 (atomic result sets are Bernoulli sets) is the key result and is correctly proved.
- The conjunctive query example effectively demonstrates compositionality.
- The encrypted search subsection (10.3) is underdeveloped: it describes a toy construction, immediately acknowledges it is insecure, and cites no literature on encrypted search (see m12).
- Algorithm 1 is clear but adds little that the mathematical definitions do not already convey.

### Section 11: Conclusion (17 lines)
- Adequate but brief. The mention of companion work on approximate algebraic data types is appropriate.
- Could benefit from a "limitations" paragraph (see S5).

### Appendix (287 lines)
- The proof of Corollary 4.3 via Hoeffding's inequality is rigorous.
- The PPV proof via Taylor expansion is complete and correct (modulo the $\FP_p$ typo, m5).
- The sampling distribution appendix (Appendix B) is somewhat disconnected from the rest of the paper.
- The notation reference (Appendix C) is comprehensive and useful.

---

## Citation Audit

### Missing references (by topic)

| Topic | Missing citations |
|-------|-------------------|
| AMQ structures | Quotient filters (Bender et al. 2012), XOR filters (Graf & Lemire 2020), Ribbon filters (Dillinger & Walzer 2021), Count-min sketch (Cormode & Muthukrishnan 2005) |
| Bloom filter theory | Kirsch & Mitzenmacher (2006) less hashing, Bose et al. (2008) optimal Bloom |
| Hash families | Carter & Wegman (1979) universal hashing |
| Encrypted search | Song, Wagner & Perrig (2000), Curtmola et al. (2006), Cash et al. (2013) |
| Binary classification | Fawcett (2006) ROC analysis, Powers (2011) on evaluation measures |
| Interval arithmetic | Moore (1966) foundational, Neumaier (1990) |
| Channel coding connection | Shannon (1948) or at least a textbook reference to BSC |

### Accuracy of existing citations

- All 10 existing citations are real and correctly attributed.
- The Broder & Mitzenmacher (2004) survey is appropriate but dated; a more recent survey would complement it.
- Cover & Thomas (2006) is correctly cited for both the entropy asymptotic and the maximum entropy claim.
- The self-citations `phf` and `shs` have been "in preparation" since 2018.

---

## Verdict

**Major revision.**

The paper has one genuine mathematical error (C1: equality probability formula in Section 6) that must be corrected, one formula error in the confidence interval (M1), and several structural issues (thin bibliography, underdeveloped sections, lack of figures) that collectively require substantive work. The core contribution -- compositional closure of Bernoulli sets under set-theoretic operations -- is sound and valuable. With the corrections and improvements outlined above, the paper would be a solid contribution to the probabilistic data structures / approximate computing literature.

**Priority ordering for revisions**:
1. Fix the equality corollary (C1) -- this is a correctness issue.
2. Fix the confidence interval quantile (M1) -- this is a correctness issue.
3. Fix the typographical errors (M2, M3, m4, m5, m6, m7).
4. Expand the bibliography (M5, m12).
5. Add figures (M7).
6. Address the structural issues (M6, m1, m2, m3, m8, m9).
7. Consider the suggestions (S1-S7).
